#==================================================================================
# BRIEF: Makefile de la librería de AFNDs, Práctica1
# AUTHOR: Alfonso Sebares, Juan Soberon 
#==================================================================================

#==================================================================================
# Entorno de desarrollo y opciones
#==================================================================================
# Compilador
CC=gcc -ansi -pedantic 
CFLAGS=-g -Wall

# Directorio en el que se encuentra el proyecto
DIR=P1
# Ejecutables
EJECUTABLES=P1 testP1
#==================================================================================
# Construccion de los ejecutables
#==================================================================================
all: $(EJECUTABLES)

P1: estado.o transicion.o afnd.o main.o
	@echo Generando ejecutable P1...
	$(CC) $(CFLAGS) -o P1 main.o afnd.o estado.o transicion.o 

testP1: estado.o transicion.o afnd.o testmain.o
	@echo Generando ejecutable de pruebas...
	$(CC) $(CFLAGS) -o testP1 testmain.o afnd.o estado.o transicion.o 
#==================================================================================
# Generacion .o/.c
#==================================================================================
main.o: main.c
	@echo Compilando main.c...
	$(CC) $(CFLAGS) -c main.c

testmain.o: testmain.c
	@echo Compilando main.c...
	$(CC) $(CFLAGS) -c testmain.c

afnd.o: afnd.c
	@echo Compilando adnd.c...
	$(CC) $(CFLAGS) -c afnd.c

transicion.o: transicion.c
	@echo Compilando transicion.c...
	$(CC) $(CFLAGS) -c transicion.c

estado.o: estado.c
	@echo Compilando estado.c...
	$(CC) $(CFLAGS) -c estado.c
#==================================================================================
# Otras acciones del make
#==================================================================================
clean:
	rm -rf *.o *.core *\.a *\.salida *\.out $(EJECUTABLES)

test_practica:
	./P1

<<<<<<< HEAD
valgrind_test: testP1
=======
valgrind_test: P1
	valgrind --leak-check=full --show-leak-kinds=all ./P1

valgrind_testP1: testP1
>>>>>>> 3b19a4d18575bd6563e1f1556b6bb51b85b2f0d6
	valgrind --leak-check=full --show-leak-kinds=all ./testP1
#==================================================================================
#
#
#==================================================================================